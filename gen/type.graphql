


interface Node {
  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  parent: Node

  children: [Node!] @hasInverse(field: parent)
  name: String! @search(by: [term])
  nameid: String! @id
  mandate: Mandate

  tensions_out: [Tension!] @hasInverse(field: emitter)
  tensions_in: [Tension!]

}

type Circle implements Node {
  isRoot: Boolean!



  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  parent: Node
  children: [Node!] @hasInverse(field: parent)
  name: String! @search(by: [term])
  nameid: String! @id
  mandate: Mandate
  tensions_out: [Tension!] @hasInverse(field: emitter)
  tensions_in: [Tension!]
}

type Role implements Node {
  user: User
  second: User
  skills: [String!] @search(by: [term])

  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  parent: Node
  children: [Node!] @hasInverse(field: parent)
  name: String! @search(by: [term])
  nameid: String! @id
  mandate: Mandate
  tensions_out: [Tension!] @hasInverse(field: emitter)
  tensions_in: [Tension!]
}

interface Post {
  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  message: String @search(by: [fulltext])
}

type Tension implements Post {
  nth: Int!

  title: String! @search(by: [term])
  type_: TensionType! @search(by: [hash])
  emitter: Node!
  receivers: [Node!]
  isAnonymous: Boolean!
  severity: Int!
  comments: [Post!]

  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  message: String @search(by: [fulltext])
}

type Mandate implements Post {
  purpose: String! @search(by: [fulltext])
  responsabilities: String
  domains: [String!]






  id: ID!
  createdAt: DateTime! @search
  createdBy: User!
  message: String @search(by: [fulltext])
}

type User {
  id: ID!
  createdAt: DateTime! @search
  username: String! @id @input_maxLength(n:42, f:"username")
  fullname: String @input_maxLength(n:100, f:"fullname")
  password: String! @hidden @input_maxLength(n:42, f:"password")
  roles: [Role!] @hasInverse(field: user)
  backed_roles: [Role!] @hasInverse(field: second)
  bio: String

}

enum NodeType {
  Circle
  Role
}

enum TensionType {
  Governance
  Operational
  Personal
  Help
  Alert

}
