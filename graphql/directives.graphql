###########################################################
#
# Reader directives -- work the field level.
#
###########################################################

#  Make the field unable to read
directive @hidden on FIELD_DEFINITION

# Use for DQL requests.
directive @meta(f: String!, k: String!) on FIELD_DEFINITION

# Return true if the user is a authorized validator for the given contract.
directive @isContractValidator on FIELD_DEFINITION

###########################################################
#
# Writer directives -- work the input field level.
#
# a:action  The function to be executed on the field.
#
###########################################################

directive @w_add(a:String!) on INPUT_FIELD_DEFINITION
directive @w_set(a:String!) on INPUT_FIELD_DEFINITION
directive @w_remove(a:String!) on INPUT_FIELD_DEFINITION
directive @w_patch(a:String!) on INPUT_FIELD_DEFINITION
directive @w_alter(a:String!) on INPUT_FIELD_DEFINITION


###########################################################
#
# Authorization directives -- work the input field level.
# --
# Those directives are automagically generated on corresponding input types.
# see the schema/gqlast.py parser for details.
# --
# By default, If no directive are given for a field,
# the @auth_patch_to is automatically generated on input;
# else-if no arguments are given, the authorization is granted;
# else the function must pass. 
#
# r:rule    Optional function that should pass (pass by default ie no argument)
# f:field   Optional field to lookup
# n:number  Optional integer value
#
###########################################################

# Add rules should be controlled by 1) dgraph @auth rule, 2) schema definition (! field) and 3) @hook_ BLA validation.
directive @x_set(r: String, f: String, n:Int) on INPUT_FIELD_DEFINITION # allows field to be set
directive @x_remove(r: String, f: String, n:Int) on INPUT_FIELD_DEFINITION # allows field to be removed
directive @x_patch(r: String, f: String, n:Int) on INPUT_FIELD_DEFINITION # allows field to be patched (set + remove)
directive @x_alter(r: String, f: String, n:Int) on INPUT_FIELD_DEFINITION # allows field to be altered (added + set + remove)
directive @x_patch_ro on INPUT_FIELD_DEFINITION # [defaut] prevent a field to be patched.
directive @x_ro on INPUT_FIELD_DEFINITION # make a field read-only (for exemple a an optional field that is not allowed to be set by a user.)



# Hook directive for mutation
# Gqlast automatically append hook in Dgraph Type, like:
#
#   addNode(input: [AddNodeInput!]! @hook_addNodeInput): AddNodePayload @hook_addNode
#   for input

